=============================================
GPS RE-ROUTER ENDPOINT TEST RESULTS
=============================================
Date: Sat Feb  7 02:10:18 WAT 2026
Base URL: http://localhost:8007/v1
Account: legendabrahamonoja@gmail.com (Abraham Onoja)

Login successful. User ID: 340b017e-fe8e-4ca0-bc8c-27daf2a9cafa

==============================================
EXISTING FINANCIAL DATA
==============================================
--- Budgets ---
{
    "success": true,
    "data": {
        "items": [
            {
                "id": "3a11235c-38e4-45d2-88b7-2435ba1b5aec",
                "category": {
                    "id": "entertainment",
                    "name": "Entertainment",
                    "icon": "film",
                    "color": "#10B981"
                },
                "amount": 100,
                "currency": "USD",
                "period": "MONTHLY",
                "startDate": "2026-02-06T11:07:46.963Z",
                "isActive": true,
                "createdAt": "2026-02-06T11:07:46.964Z",
                "updatedAt": "2026-02-06T11:07:46.964Z",
                "spent": 181.46,
                "remaining": -81.46000000000001,
                "percentUsed": 181
            },
            {
                "id": "2dffac9d-11ec-4898-be9a-aa18d84f7bf7",
                "category": {
                    "id": "food-dining",
                    "name": "Food & Dining",
                    "icon": "utensils",
                    "color": "#F59E0B"
                },
                "amount": 800,
                "currency": "USD",
                "period": "MONTHLY",
                "startDate": "2026-02-06T11:07:46.891Z",
                "isActive": true,
                "createdAt": "2026-02-06T11:07:46.892Z",
                "updatedAt": "2026-02-06T11:07:46.892Z",
                "spent": 1050.12,
                "remaining": -250.1199999999999,
                "percentUsed": 131
            },
            {
                "id": "7d54febd-5dc0-4ecd-943e-818a89a4ae92",
                "category": {
                    "id": "healthcare",
                    "name": "Healthcare",
                    "icon": "heart-pulse",
                    "color": "#EF4444"
                },
                "amount": 50,
                "currency": "USD",
                "period": "MONTHLY",
                "startDate": "2026-02-06T11:07:47.065Z",
                "isActive": true,
                "createdAt": "2026-02-06T11:07:47.065Z",
                "updatedAt": "2026-02-06T11:07:47.065Z",
                "spent": 25,
                "remaining": 25,
                "percentUsed": 50
            },
            {
                "id": "2fa2285a-a3ec-4118-98f4-5028e86d0c5d",
                "category": {
                    "id": "shopping",
                    "name": "Shopping",
                    "icon": "shopping-bag",
                    "color": "#EC4899"
                },
                "amount": 400,
                "currency": "USD",
                "period": "MONTHLY",
                "startDate": "2026-02-06T11:07:47.031Z",
                "isActive": true,
                "createdAt": "2026-02-06T11:07:47.031Z",
                "updatedAt": "2026-02-06T11:07:47.031Z",
                "spent": 439.97,
                "remaining": -39.97000000000003,
                "percentUsed": 110
            },
            {
                "id": "1b197db9-2cbf-4d2d-b4e4-ca512ce0b89f",
                "category": {
                    "id": "transportation",
                    "name": "Transportation",
                    "icon": "car",
                    "color": "#3B82F6"
                },
                "amount": 120,
                "currency": "USD",
                "period": "MONTHLY",
                "startDate": "2026-02-06T11:07:46.929Z",
                "isActive": true,
                "createdAt": "2026-02-06T11:07:46.930Z",
                "updatedAt": "2026-02-06T11:07:46.930Z",
                "spent": 53.1,
                "remaining": 66.9,
                "percentUsed": 44
            },
            {
                "id": "de58e2d9-299a-474d-a820-01e100dfe9fa",
                "category": {
                    "id": "utilities",
                    "name": "Utilities",
                    "icon": "zap",
                    "color": "#8B5CF6"
                },
                "amount": 350,
                "currency": "USD",
                "period": "MONTHLY",
                "startDate": "2026-02-06T11:07:46.998Z",
                "isActive": true,
                "createdAt": "2026-02-06T11:07:46.999Z",
                "updatedAt": "2026-02-06T11:07:46.999Z",
                "spent": 0,
                "remaining": 350,
                "percentUsed": 0
            }
        ],
        "count": 6,
        "totalBudget": 1820,
        "totalSpent": 1749.65,
        "totalRemaining": 70.35
    },
    "timestamp": "2026-02-07T01:10:18.458Z"
}

--- Goals ---
{
    "success": true,
    "data": {
        "items": [
            {
                "id": "6a3e5342-31ed-4a52-8c98-58aa610dc16f",
                "name": "Travel to Mexico",
                "category": "TRAVEL",
                "targetAmount": 4000,
                "currentAmount": 500,
                "currency": "USD",
                "description": "Okay ooo",
                "targetDate": "2026-03-29T00:00:00.000Z",
                "priority": 1,
                "status": "ACTIVE",
                "createdAt": "2026-02-06T23:50:26.793Z",
                "updatedAt": "2026-02-06T23:50:26.793Z",
                "progressPercent": 13,
                "remainingAmount": 3500
            },
            {
                "id": "0e7eaa5c-0a44-490e-9043-d6530f7b65bf",
                "name": "Invest in Real Estate ",
                "category": "INVESTMENT",
                "targetAmount": 150000,
                "currentAmount": 10000,
                "currency": "USD",
                "description": null,
                "targetDate": "2028-02-22T00:00:00.000Z",
                "priority": 50,
                "status": "ACTIVE",
                "createdAt": "2026-02-05T02:23:40.255Z",
                "updatedAt": "2026-02-07T01:06:28.847Z",
                "progressPercent": 7,
                "remainingAmount": 140000
            },
            {
                "id": "4958095b-1b3f-4e11-99a9-1216f6647b20",
                "name": "Test Purchase",
                "category": "MAJOR_PURCHASE",
                "targetAmount": 1000,
                "currentAmount": 0,
                "currency": "USD",
                "description": null,
                "targetDate": null,
                "priority": 0,
                "status": "CANCELLED",
                "createdAt": "2026-02-06T23:49:06.878Z",
                "updatedAt": "2026-02-06T23:49:13.728Z",
                "progressPercent": 0,
                "remainingAmount": 1000
            }
        ],
        "count": 3,
        "totalTarget": 154000,
        "totalCurrent": 10500,
        "overallProgress": 7
    },
    "timestamp": "2026-02-07T01:10:18.504Z"
}

Budget category: '' (ID: )
Goal ID: 

################################################
# GPS RE-ROUTER ENDPOINT TESTS
################################################

=============================================
TEST #1: 1a. Recalculate (category name)
POST http://localhost:8007/v1/gps/recalculate
BODY: {"category":"Food & Dining"}
---------------------------------------------
HTTP Status: 201
Response:
{
    "success": true,
    "data": {
        "sessionId": "7792dc49-4374-4f68-ad9b-e9b56c003d3e",
        "budgetStatus": {
            "category": "Food & Dining",
            "categoryId": "food-dining",
            "budgeted": {
                "amount": 800,
                "formatted": "$800",
                "currency": "USD"
            },
            "spent": {
                "amount": 1050.12,
                "formatted": "$1,050",
                "currency": "USD"
            },
            "remaining": {
                "amount": -250.1199999999999,
                "formatted": "$-250",
                "currency": "USD"
            },
            "overagePercent": 31.264999999999986,
            "trigger": "BUDGET_CRITICAL",
            "period": "MONTHLY"
        },
        "goalImpact": {
            "goalId": "0e7eaa5c-0a44-490e-9043-d6530f7b65bf",
            "goalName": "Invest in Real Estate ",
            "goalAmount": {
                "amount": 150000,
                "formatted": "$150,000",
                "currency": "USD"
            },
            "goalDeadline": "2028-02-22T00:00:00.000Z",
            "previousProbability": 0.95,
            "newProbability": 0.93,
            "probabilityDrop": -0.019999999999999907,
            "message": "Your goal probability decreased by 2.0 percentage points"
        },
        "multiGoalImpact": {
            "primaryGoal": {
                "goalId": "0e7eaa5c-0a44-490e-9043-d6530f7b65bf",
                "goalName": "Invest in Real Estate ",
                "goalAmount": {
                    "amount": 150000,
                    "formatted": "$150,000",
                    "currency": "USD"
                },
                "goalDeadline": "2028-02-22T00:00:00.000Z",
                "previousProbability": 0.95,
                "newProbability": 0.93,
                "probabilityDrop": -0.019999999999999907,
                "message": "Your goal probability decreased by 2.0 percentage points"
            },
            "otherGoals": [
                {
                    "goalId": "6a3e5342-31ed-4a52-8c98-58aa610dc16f",
                    "goalName": "Travel to Mexico",
                    "goalAmount": {
                        "amount": 4000,
                        "formatted": "$4,000",
                        "currency": "USD"
                    },
                    "goalDeadline": "2026-03-29T00:00:00.000Z",
                    "previousProbability": 0,
                    "newProbability": 0,
                    "probabilityDrop": 0,
                    "message": "Your goal probability remains unchanged"
                }
            ],
            "summary": {
                "totalGoalsAffected": 2,
                "averageProbabilityDrop": -0.009999999999999953,
                "mostAffectedGoal": "Invest in Real Estate ",
                "leastAffectedGoal": "Travel to Mexico"
            }
        },
        "recoveryPaths": [
            {
                "id": "freeze_protocol",
                "name": "Category Pause",
                "description": "Pause spending in Food & Dining for 4 weeks",
                "newProbability": 0.99,
                "effort": "High",
                "freezeDuration": "Pause Food & Dining for 4 weeks"
            },
            {
                "id": "rate_adjustment",
                "name": "Savings Boost",
                "description": "Increase your savings rate by 5% for 4 weeks",
                "newProbability": 0.97,
                "effort": "Medium",
                "savingsImpact": "+5% for 4 weeks"
            },
            {
                "id": "time_adjustment",
                "name": "Timeline Flex",
                "description": "Extend your goal deadline by 2 weeks",
                "newProbability": 0.96,
                "effort": "Low",
                "timelineImpact": "+2 weeks"
            },
            {
                "id": "category_rebalance",
                "name": "Smart Swap",
                "description": "Cover this with your Utilities surplus ($275 available)",
                "newProbability": 0.95,
                "effort": "None",
                "rebalanceInfo": {
                    "fromCategory": "Utilities",
                    "fromCategoryId": "utilities",
                    "availableSurplus": 275,
                    "coverageAmount": 250.1199999999999,
                    "isFullCoverage": true
                }
            }
        ],
        "message": {
            "tone": "Supportive",
            "headline": "Your route just shifted slightly",
            "subtext": "Food spending took a detour, but your Real Estate goal only dropped from 95% to 93% likely. Good news: you have $350 in Utilities surplus that covers most of this perfectly!"
        }
    },
    "timestamp": "2026-02-07T01:10:32.466Z"
}
RESULT: PASS

CAPTURED SESSION_ID: 7792dc49-4374-4f68-ad9b-e9b56c003d3e
=============================================
TEST #2: 1b. Recalculate (category + goalId - no goal available)
POST http://localhost:8007/v1/gps/recalculate
BODY: {"category":"Food & Dining"}
---------------------------------------------
HTTP Status: 201
Response:
{
    "success": true,
    "data": {
        "sessionId": "4c0eeae2-f5d3-40ea-94e0-c63448b2317c",
        "budgetStatus": {
            "category": "Food & Dining",
            "categoryId": "food-dining",
            "budgeted": {
                "amount": 800,
                "formatted": "$800",
                "currency": "USD"
            },
            "spent": {
                "amount": 1050.12,
                "formatted": "$1,050",
                "currency": "USD"
            },
            "remaining": {
                "amount": -250.1199999999999,
                "formatted": "$-250",
                "currency": "USD"
            },
            "overagePercent": 31.264999999999986,
            "trigger": "BUDGET_CRITICAL",
            "period": "MONTHLY"
        },
        "goalImpact": {
            "goalId": "0e7eaa5c-0a44-490e-9043-d6530f7b65bf",
            "goalName": "Invest in Real Estate ",
            "goalAmount": {
                "amount": 150000,
                "formatted": "$150,000",
                "currency": "USD"
            },
            "goalDeadline": "2028-02-22T00:00:00.000Z",
            "previousProbability": 0.95,
            "newProbability": 0.93,
            "probabilityDrop": -0.019999999999999907,
            "message": "Your goal probability decreased by 2.0 percentage points"
        },
        "multiGoalImpact": {
            "primaryGoal": {
                "goalId": "0e7eaa5c-0a44-490e-9043-d6530f7b65bf",
                "goalName": "Invest in Real Estate ",
                "goalAmount": {
                    "amount": 150000,
                    "formatted": "$150,000",
                    "currency": "USD"
                },
                "goalDeadline": "2028-02-22T00:00:00.000Z",
                "previousProbability": 0.95,
                "newProbability": 0.93,
                "probabilityDrop": -0.019999999999999907,
                "message": "Your goal probability decreased by 2.0 percentage points"
            },
            "otherGoals": [
                {
                    "goalId": "6a3e5342-31ed-4a52-8c98-58aa610dc16f",
                    "goalName": "Travel to Mexico",
                    "goalAmount": {
                        "amount": 4000,
                        "formatted": "$4,000",
                        "currency": "USD"
                    },
                    "goalDeadline": "2026-03-29T00:00:00.000Z",
                    "previousProbability": 0,
                    "newProbability": 0,
                    "probabilityDrop": 0,
                    "message": "Your goal probability remains unchanged"
                }
            ],
            "summary": {
                "totalGoalsAffected": 2,
                "averageProbabilityDrop": -0.009999999999999953,
                "mostAffectedGoal": "Invest in Real Estate ",
                "leastAffectedGoal": "Travel to Mexico"
            }
        },
        "recoveryPaths": [
            {
                "id": "freeze_protocol",
                "name": "Category Pause",
                "description": "Pause spending in Food & Dining for 4 weeks",
                "newProbability": 0.99,
                "effort": "High",
                "freezeDuration": "Pause Food & Dining for 4 weeks"
            },
            {
                "id": "rate_adjustment",
                "name": "Savings Boost",
                "description": "Increase your savings rate by 5% for 4 weeks",
                "newProbability": 0.97,
                "effort": "Medium",
                "savingsImpact": "+5% for 4 weeks"
            },
            {
                "id": "time_adjustment",
                "name": "Timeline Flex",
                "description": "Extend your goal deadline by 2 weeks",
                "newProbability": 0.96,
                "effort": "Low",
                "timelineImpact": "+2 weeks"
            },
            {
                "id": "category_rebalance",
                "name": "Smart Swap",
                "description": "Cover this with your Utilities surplus ($275 available)",
                "newProbability": 0.95,
                "effort": "None",
                "rebalanceInfo": {
                    "fromCategory": "Utilities",
                    "fromCategoryId": "utilities",
                    "availableSurplus": 275,
                    "coverageAmount": 250.1199999999999,
                    "isFullCoverage": true
                }
            }
        ],
        "message": {
            "tone": "Supportive",
            "headline": "Your route just shifted slightly",
            "subtext": "Food spending went over by $250, dropping your Real Estate goal from 95% to 93% likely. Good news: You have $350 in Utilities surplus to cover this completely!"
        }
    },
    "timestamp": "2026-02-07T01:10:43.939Z"
}
RESULT: PASS

CAPTURED SESSION_ID: 4c0eeae2-f5d3-40ea-94e0-c63448b2317c
=============================================
TEST #3: 2a. Get recovery paths (auto-detect)
GET http://localhost:8007/v1/gps/recovery-paths
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "paths": [
            {
                "id": "rate_adjustment",
                "name": "Savings Boost",
                "description": "Increase your savings rate by 5% for 4 weeks",
                "newProbability": 0.97,
                "effort": "Medium",
                "savingsImpact": "+5% for 4 weeks"
            },
            {
                "id": "time_adjustment",
                "name": "Timeline Flex",
                "description": "Extend your goal deadline by 2 weeks",
                "newProbability": 0.96,
                "effort": "Low",
                "timelineImpact": "+2 weeks"
            },
            {
                "id": "freeze_protocol",
                "name": "Category Pause",
                "description": "Pause spending in Entertainment for 4 weeks",
                "newProbability": 0.94,
                "effort": "High",
                "freezeDuration": "Pause Entertainment for 4 weeks"
            },
            {
                "id": "category_rebalance",
                "name": "Smart Swap",
                "description": "Cover this with your Utilities surplus ($275 available)",
                "newProbability": 0.93,
                "effort": "None",
                "rebalanceInfo": {
                    "fromCategory": "Utilities",
                    "fromCategoryId": "utilities",
                    "availableSurplus": 275,
                    "coverageAmount": 81.46000000000001,
                    "isFullCoverage": true
                }
            }
        ],
        "sessionId": "2b85c2d5-8e75-47c7-8697-28384f8f1ac1",
        "category": "Entertainment"
    },
    "timestamp": "2026-02-07T01:10:44.752Z"
}
RESULT: PASS

=============================================
TEST #4: 2b. Get recovery paths (by sessionId)
GET http://localhost:8007/v1/gps/recovery-paths?sessionId=4c0eeae2-f5d3-40ea-94e0-c63448b2317c
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "paths": [
            {
                "id": "freeze_protocol",
                "name": "Category Pause",
                "description": "Pause spending in Food & Dining for 4 weeks",
                "newProbability": 0.99,
                "effort": "High",
                "freezeDuration": "Pause Food & Dining for 4 weeks"
            },
            {
                "id": "rate_adjustment",
                "name": "Savings Boost",
                "description": "Increase your savings rate by 5% for 4 weeks",
                "newProbability": 0.97,
                "effort": "Medium",
                "savingsImpact": "+5% for 4 weeks"
            },
            {
                "id": "time_adjustment",
                "name": "Timeline Flex",
                "description": "Extend your goal deadline by 2 weeks",
                "newProbability": 0.96,
                "effort": "Low",
                "timelineImpact": "+2 weeks"
            },
            {
                "id": "category_rebalance",
                "name": "Smart Swap",
                "description": "Cover this with your Utilities surplus ($275 available)",
                "newProbability": 0.95,
                "effort": "None",
                "rebalanceInfo": {
                    "fromCategory": "Utilities",
                    "fromCategoryId": "utilities",
                    "availableSurplus": 275,
                    "coverageAmount": 250.1199999999999,
                    "isFullCoverage": true
                }
            }
        ],
        "sessionId": "4c0eeae2-f5d3-40ea-94e0-c63448b2317c",
        "category": "Food & Dining"
    },
    "timestamp": "2026-02-07T01:10:44.809Z"
}
RESULT: PASS

=============================================
TEST #5: 3a. Select path: time_adjustment
POST http://localhost:8007/v1/gps/recovery-paths/time_adjustment/select
BODY: {"sessionId":"4c0eeae2-f5d3-40ea-94e0-c63448b2317c"}
---------------------------------------------
HTTP Status: 201
Response:
{
    "success": true,
    "message": "Your goal deadline has been extended by 2 weeks to give you more time to recover.",
    "selectedPathId": "time_adjustment",
    "selectedAt": "2026-02-07T01:10:44.852Z",
    "details": {
        "durationWeeks": 2,
        "endDate": "2028-03-07T00:00:00.000Z",
        "previousDeadline": "2028-02-22T00:00:00.000Z",
        "newDeadline": "2028-03-07T00:00:00.000Z"
    },
    "nextSteps": [
        "Your goal deadline has been automatically updated",
        "Review your updated timeline in the Goals section",
        "Consider adjusting your budget to stay on track",
        "New target date: 3/7/2028"
    ]
}
RESULT: PASS

=============================================
TEST #6: 3b. Select path: rate_adjustment (may 409)
POST http://localhost:8007/v1/gps/recovery-paths/rate_adjustment/select
BODY: {"sessionId":"4c0eeae2-f5d3-40ea-94e0-c63448b2317c"}
---------------------------------------------
HTTP Status: 409
Response:
{
    "success": false,
    "error": {
        "code": "GPS_10006",
        "message": "Recovery session '4c0eeae2-f5d3-40ea-94e0-c63448b2317c' has already been resolved with status: IN_PROGRESS",
        "details": {
            "sessionId": "4c0eeae2-f5d3-40ea-94e0-c63448b2317c",
            "currentStatus": "IN_PROGRESS"
        }
    },
    "timestamp": "2026-02-07T01:10:44.903Z"
}
RESULT: ISSUE (HTTP 409)

=============================================
TEST #7: 3c. Select path: freeze_protocol (may 409)
POST http://localhost:8007/v1/gps/recovery-paths/freeze_protocol/select
BODY: {"sessionId":"4c0eeae2-f5d3-40ea-94e0-c63448b2317c"}
---------------------------------------------
HTTP Status: 409
Response:
{
    "success": false,
    "error": {
        "code": "GPS_10006",
        "message": "Recovery session '4c0eeae2-f5d3-40ea-94e0-c63448b2317c' has already been resolved with status: IN_PROGRESS",
        "details": {
            "sessionId": "4c0eeae2-f5d3-40ea-94e0-c63448b2317c",
            "currentStatus": "IN_PROGRESS"
        }
    },
    "timestamp": "2026-02-07T01:10:44.944Z"
}
RESULT: ISSUE (HTTP 409)

=============================================
TEST #8: 3d. Select INVALID path
POST http://localhost:8007/v1/gps/recovery-paths/bogus_path/select
BODY: {"sessionId":"4c0eeae2-f5d3-40ea-94e0-c63448b2317c"}
EXPECTED: HTTP 400
---------------------------------------------
HTTP Status: 400
Response:
{
    "success": false,
    "error": {
        "code": "GPS_10005",
        "message": "Invalid recovery path 'bogus_path'. Valid paths are: category_rebalance, time_adjustment, rate_adjustment, freeze_protocol",
        "details": {
            "pathId": "bogus_path",
            "validPaths": [
                "category_rebalance",
                "time_adjustment",
                "rate_adjustment",
                "freeze_protocol"
            ]
        }
    },
    "timestamp": "2026-02-07T01:10:44.987Z"
}
RESULT: PASS (expected HTTP 400)

=============================================
TEST #9: 4a. What-If simulation
POST http://localhost:8007/v1/gps/what-if
BODY: {"category":"Food & Dining","additionalSpend":5000}
---------------------------------------------
HTTP Status: 201
Response:
{
    "success": true,
    "data": {
        "category": "Food & Dining",
        "simulatedAmount": 5000,
        "budgetImpact": {
            "budgetAmount": 800,
            "currentSpending": 1050.12,
            "projectedSpending": 6050.12,
            "currentPercentUsed": 131,
            "projectedPercentUsed": 756,
            "remainingAfterSpend": -5250.12
        },
        "probabilityImpact": {
            "goalId": "0e7eaa5c-0a44-490e-9043-d6530f7b65bf",
            "goalName": "Invest in Real Estate ",
            "currentProbability": 0.96,
            "projectedProbability": 0,
            "probabilityChange": -0.96,
            "changePercentPoints": -96
        },
        "triggerPreview": {
            "wouldTrigger": true,
            "triggerLevel": "BUDGET_CRITICAL",
            "description": "This would put you at 756% of your budget - well over the limit."
        },
        "recoveryPreview": [
            {
                "id": "freeze_protocol",
                "name": "Category Pause",
                "description": "Pause spending in Food & Dining for 4 weeks",
                "newProbability": 1,
                "effort": "High",
                "freezeDuration": "Pause Food & Dining for 4 weeks"
            },
            {
                "id": "rate_adjustment",
                "name": "Savings Boost",
                "description": "Increase your savings rate by 5% for 4 weeks",
                "newProbability": 0.99,
                "effort": "Medium",
                "savingsImpact": "+5% for 4 weeks"
            },
            {
                "id": "category_rebalance",
                "name": "Smart Swap",
                "description": "Partially cover with Utilities surplus ($275 of $5,250)",
                "newProbability": 0.98,
                "effort": "None",
                "rebalanceInfo": {
                    "fromCategory": "Utilities",
                    "fromCategoryId": "utilities",
                    "availableSurplus": 275,
                    "coverageAmount": 275,
                    "isFullCoverage": false
                }
            },
            {
                "id": "time_adjustment",
                "name": "Timeline Flex",
                "description": "Extend your goal deadline by 2 weeks",
                "newProbability": 0.95,
                "effort": "Low",
                "timelineImpact": "+2 weeks"
            }
        ],
        "recommendation": "This purchase would significantly impact your budget and goal probability. Consider alternatives or delaying.",
        "severity": "high"
    },
    "timestamp": "2026-02-07T01:10:46.604Z"
}
RESULT: PASS

=============================================
TEST #10: 5a. Get session details (real session)
GET http://localhost:8007/v1/gps/sessions/4c0eeae2-f5d3-40ea-94e0-c63448b2317c
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "id": "4c0eeae2-f5d3-40ea-94e0-c63448b2317c",
        "category": "Food & Dining",
        "overspendAmount": 250.12,
        "previousProbability": 0.95,
        "newProbability": 0.93,
        "selectedPathId": "time_adjustment",
        "selectedAt": "2026-02-07T01:10:44.852Z",
        "status": "IN_PROGRESS",
        "createdAt": "2026-02-07T01:10:43.937Z",
        "updatedAt": "2026-02-07T01:10:44.859Z",
        "recoveryProgress": {
            "daysCompleted": 0,
            "daysRemaining": 14,
            "percentComplete": 0,
            "milestones": [
                {
                    "percent": 25,
                    "achieved": false,
                    "projectedAt": "2026-02-11T01:10:44.852Z"
                },
                {
                    "percent": 50,
                    "achieved": false,
                    "projectedAt": "2026-02-14T01:10:44.852Z"
                },
                {
                    "percent": 75,
                    "achieved": false,
                    "projectedAt": "2026-02-18T01:10:44.852Z"
                },
                {
                    "percent": 100,
                    "achieved": false,
                    "projectedAt": "2026-02-21T01:10:44.852Z"
                }
            ],
            "encouragement": "Building momentum - you've got this! 14 days to go.",
            "onTrack": true,
            "estimatedCompletionDate": "2026-02-21T01:10:44.852Z"
        },
        "selectedPath": {
            "id": "time_adjustment",
            "name": "Timeline Flex",
            "expectedCompletion": "2026-02-21T01:10:44.852Z"
        }
    },
    "timestamp": "2026-02-07T01:10:46.651Z"
}
RESULT: PASS

=============================================
TEST #11: 5b. Get session (non-existent)
GET http://localhost:8007/v1/gps/sessions/00000000-1111-2222-3333-444444444444
EXPECTED: HTTP 404
---------------------------------------------
HTTP Status: 404
Response:
{
    "success": false,
    "error": {
        "code": "GPS_10004",
        "message": "Recovery session with id '00000000-1111-2222-3333-444444444444' not found",
        "details": {
            "sessionId": "00000000-1111-2222-3333-444444444444"
        }
    },
    "timestamp": "2026-02-07T01:10:46.691Z"
}
RESULT: PASS (expected HTTP 404)

=============================================
TEST #12: 6a. Analytics dashboard (default)
GET http://localhost:8007/v1/gps/analytics/dashboard
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "period": {
            "start": "2026-01-08T01:10:46.730Z",
            "end": "2026-02-07T01:10:46.730Z"
        },
        "pathSelection": [
            {
                "pathId": "time_adjustment",
                "pathName": "Timeline Flex",
                "count": 8,
                "percentage": 53.33
            },
            {
                "pathId": "freeze_protocol",
                "pathName": "Category Pause",
                "count": 4,
                "percentage": 26.67
            },
            {
                "pathId": "rate_adjustment",
                "pathName": "Savings Boost",
                "count": 2,
                "percentage": 13.33
            },
            {
                "pathId": "category_rebalance",
                "pathName": "Smart Swap",
                "count": 1,
                "percentage": 6.67
            }
        ],
        "goalSurvival": {
            "totalSlips": 42,
            "recovered": 15,
            "abandoned": 0,
            "pending": 27,
            "survivalRate": 35.71
        },
        "timeToRecovery": {
            "averageHours": 0,
            "medianHours": 0,
            "minHours": 0,
            "maxHours": 0,
            "distribution": {
                "under1Hour": 15,
                "hours1to6": 0,
                "hours6to24": 0,
                "over24Hours": 0
            }
        },
        "probabilityRestoration": {
            "averageDropPercent": 1,
            "averageRestoredPercent": 0.7,
            "fullyRestoredCount": 14,
            "partiallyRestoredCount": 1,
            "restorationRate": 100
        },
        "totalSessions": 42,
        "totalBudgetThresholdsCrossed": 5
    },
    "timestamp": "2026-02-07T01:10:46.732Z"
}
RESULT: PASS

=============================================
TEST #13: 6b. Analytics dashboard (7 days)
GET http://localhost:8007/v1/gps/analytics/dashboard?days=7
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "period": {
            "start": "2026-01-31T01:10:46.771Z",
            "end": "2026-02-07T01:10:46.771Z"
        },
        "pathSelection": [
            {
                "pathId": "time_adjustment",
                "pathName": "Timeline Flex",
                "count": 8,
                "percentage": 53.33
            },
            {
                "pathId": "freeze_protocol",
                "pathName": "Category Pause",
                "count": 4,
                "percentage": 26.67
            },
            {
                "pathId": "rate_adjustment",
                "pathName": "Savings Boost",
                "count": 2,
                "percentage": 13.33
            },
            {
                "pathId": "category_rebalance",
                "pathName": "Smart Swap",
                "count": 1,
                "percentage": 6.67
            }
        ],
        "goalSurvival": {
            "totalSlips": 42,
            "recovered": 15,
            "abandoned": 0,
            "pending": 27,
            "survivalRate": 35.71
        },
        "timeToRecovery": {
            "averageHours": 0,
            "medianHours": 0,
            "minHours": 0,
            "maxHours": 0,
            "distribution": {
                "under1Hour": 15,
                "hours1to6": 0,
                "hours6to24": 0,
                "over24Hours": 0
            }
        },
        "probabilityRestoration": {
            "averageDropPercent": 1,
            "averageRestoredPercent": 0.7,
            "fullyRestoredCount": 14,
            "partiallyRestoredCount": 1,
            "restorationRate": 100
        },
        "totalSessions": 42,
        "totalBudgetThresholdsCrossed": 5
    },
    "timestamp": "2026-02-07T01:10:46.772Z"
}
RESULT: PASS

=============================================
TEST #14: 7a. My analytics (default)
GET http://localhost:8007/v1/gps/analytics/me
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "totalSlips": 27,
        "recoveryRate": 0.25925925925925924,
        "recoveryRateFormatted": "26%",
        "preferredPath": {
            "id": "time_adjustment",
            "name": "Timeline Flex",
            "usageCount": 6
        },
        "averageTimeToRecovery": {
            "hours": 0,
            "formatted": "Under 1 hour"
        },
        "totalProbabilityRestored": 0.019999999999999907
    },
    "timestamp": "2026-02-07T01:10:46.813Z"
}
RESULT: PASS

=============================================
TEST #15: 7b. My analytics (30 days)
GET http://localhost:8007/v1/gps/analytics/me?days=30
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "totalSlips": 27,
        "recoveryRate": 0.25925925925925924,
        "recoveryRateFormatted": "26%",
        "preferredPath": {
            "id": "time_adjustment",
            "name": "Timeline Flex",
            "usageCount": 6
        },
        "averageTimeToRecovery": {
            "hours": 0,
            "formatted": "Under 1 hour"
        },
        "totalProbabilityRestored": 0.019999999999999907
    },
    "timestamp": "2026-02-07T01:10:46.853Z"
}
RESULT: PASS

=============================================
TEST #16: 8. Category analytics
GET http://localhost:8007/v1/gps/analytics/categories
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": [
        {
            "category": "Food & Dining",
            "categoryId": "food-dining",
            "totalSlips": 21,
            "recoveryRate": 0.52,
            "recoveryRateFormatted": "52%",
            "mostSelectedPath": {
                "id": "time_adjustment",
                "name": "Timeline Flex",
                "count": 7
            },
            "averageOverspendPercent": 31.26,
            "totalOverspendAmount": {
                "amount": 103451,
                "currency": "USD",
                "formatted": "$1,034.51"
            }
        },
        {
            "category": "Entertainment",
            "categoryId": "entertainment",
            "totalSlips": 20,
            "recoveryRate": 0.15,
            "recoveryRateFormatted": "15%",
            "mostSelectedPath": {
                "id": "rate_adjustment",
                "name": "Savings Boost",
                "count": 1
            },
            "averageOverspendPercent": 81.46,
            "totalOverspendAmount": {
                "amount": 26466,
                "currency": "USD",
                "formatted": "$264.66"
            }
        },
        {
            "category": "shopping",
            "categoryId": "shopping",
            "totalSlips": 1,
            "recoveryRate": 1,
            "recoveryRateFormatted": "100%",
            "mostSelectedPath": {
                "id": "freeze_protocol",
                "name": "Category Pause",
                "count": 1
            },
            "averageOverspendPercent": 0,
            "totalOverspendAmount": {
                "amount": 0,
                "currency": "USD",
                "formatted": "$0.00"
            }
        }
    ],
    "timestamp": "2026-02-07T01:10:46.894Z"
}
RESULT: PASS

=============================================
TEST #17: 9. Streak status
GET http://localhost:8007/v1/gps/streaks
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "currentStreak": 0,
        "longestStreak": 0,
        "lastDate": null,
        "isActiveToday": false,
        "encouragement": "Great start! You're on your way.",
        "daysToNextMilestone": 7,
        "nextMilestoneName": "Streak Champion (7 days)"
    },
    "timestamp": "2026-02-07T01:10:46.935Z"
}
RESULT: PASS

=============================================
TEST #18: 10. Achievements
GET http://localhost:8007/v1/gps/achievements
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "earned": [],
        "available": [
            {
                "type": "FIRST_RECOVERY",
                "name": "First Steps",
                "description": "Completed your first recovery path",
                "icon": "footprints",
                "hint": "Complete a recovery path to unlock",
                "progress": 0
            },
            {
                "type": "STREAK_7_DAYS",
                "name": "Streak Champion",
                "description": "Stayed under budget for 7 consecutive days",
                "icon": "trophy",
                "hint": "Keep going for 7 more days!",
                "progress": 0
            },
            {
                "type": "STREAK_30_DAYS",
                "name": "Consistency Master",
                "description": "Stayed under budget for 30 consecutive days",
                "icon": "medal",
                "hint": "Keep going for 30 more days!",
                "progress": 0
            },
            {
                "type": "FREEZE_CHAMPION",
                "name": "Freeze Champion",
                "description": "Successfully completed a category pause",
                "icon": "snowflake",
                "hint": "Complete a category freeze recovery action",
                "progress": 0
            },
            {
                "type": "COMEBACK_KID",
                "name": "Comeback Story",
                "description": "Recovered from 3 or more budget slips",
                "icon": "rocket",
                "hint": "Show resilience by completing 3+ recoveries",
                "progress": 1
            },
            {
                "type": "MILESTONE_MASTER",
                "name": "Milestone Master",
                "description": "Reached all recovery milestones in a session",
                "icon": "flag",
                "hint": "Complete all milestones (25%, 50%, 75%, 100%) in a recovery",
                "progress": 0
            }
        ],
        "totalEarned": 0,
        "totalAvailable": 6
    },
    "timestamp": "2026-02-07T01:10:46.977Z"
}
RESULT: PASS

=============================================
TEST #19: 11a. Notifications (default)
GET http://localhost:8007/v1/gps/notifications
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "notifications": [
            {
                "id": "9f4af572-26fb-46a5-9416-a991b5e6f588",
                "title": "Food & Dining needs attention",
                "message": "Food & Dining is over budget. This is a detour, not a dead end - here are your options.",
                "triggerType": "BUDGET_CRITICAL",
                "categoryId": "food-dining",
                "categoryName": "Food & Dining",
                "isRead": true,
                "readAt": "2026-02-07T00:30:59.885Z",
                "actionUrl": "/gps/recovery-paths?category=Food%20%26%20Dining",
                "createdAt": "2026-02-07T00:08:18.162Z"
            },
            {
                "id": "8b0004d1-38bf-40fc-8fa7-b19621125dfb",
                "title": "Food & Dining limit reached",
                "message": "You've reached your Food & Dining budget. Let's explore some options to keep your goals on track.",
                "triggerType": "BUDGET_EXCEEDED",
                "categoryId": "food-dining",
                "categoryName": "Food & Dining",
                "isRead": true,
                "readAt": "2026-02-06T11:09:51.085Z",
                "actionUrl": "/gps/recovery-paths?category=Food%20%26%20Dining",
                "createdAt": "2026-02-06T11:09:20.923Z"
            },
            {
                "id": "056be2af-8b10-456d-9aaa-91ee8db0e039",
                "title": "Shopping budget reached",
                "message": "Shopping budget reached. Every detour has a route back - let's find yours.",
                "triggerType": "BUDGET_EXCEEDED",
                "categoryId": "shopping",
                "categoryName": "Shopping",
                "isRead": true,
                "readAt": "2026-02-06T11:09:51.176Z",
                "actionUrl": "/gps/recovery-paths?category=Shopping",
                "createdAt": "2026-02-06T11:08:35.805Z"
            },
            {
                "id": "f811128a-ede0-4a92-9006-8e445a82df51",
                "title": "Entertainment needs attention",
                "message": "Entertainment is over budget. This is a detour, not a dead end - here are your options.",
                "triggerType": "BUDGET_CRITICAL",
                "categoryId": "entertainment",
                "categoryName": "Entertainment",
                "isRead": true,
                "readAt": "2026-02-06T11:09:51.176Z",
                "actionUrl": "/gps/recovery-paths?category=Entertainment",
                "createdAt": "2026-02-06T11:07:47.193Z"
            }
        ],
        "unreadCount": 0,
        "totalCount": 4
    },
    "timestamp": "2026-02-07T01:10:47.021Z"
}
RESULT: PASS

=============================================
TEST #20: 11b. Notifications (limit=5, unreadOnly)
GET http://localhost:8007/v1/gps/notifications?limit=5&unreadOnly=true
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "notifications": [],
        "unreadCount": 0,
        "totalCount": 4
    },
    "timestamp": "2026-02-07T01:10:47.064Z"
}
RESULT: PASS

=============================================
TEST #21: 12. Unread count
GET http://localhost:8007/v1/gps/notifications/unread-count
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "count": 0,
        "hasUnread": false
    },
    "timestamp": "2026-02-07T01:10:47.103Z"
}
RESULT: PASS

=============================================
TEST #22: 13a. Mark notification read (real ID)
POST http://localhost:8007/v1/gps/notifications/9f4af572-26fb-46a5-9416-a991b5e6f588/read
---------------------------------------------
HTTP Status: 201
Response:
{
    "success": false,
    "markedCount": 0
}
RESULT: PASS

=============================================
TEST #23: 13b. Mark notification read (fake ID)
POST http://localhost:8007/v1/gps/notifications/00000000-1111-2222-3333-444444444444/read
---------------------------------------------
HTTP Status: 201
Response:
{
    "success": false,
    "markedCount": 0
}
RESULT: PASS

=============================================
TEST #24: 14. Mark all notifications read
POST http://localhost:8007/v1/gps/notifications/read-all
---------------------------------------------
HTTP Status: 201
Response:
{
    "success": true,
    "markedCount": 0
}
RESULT: PASS

=============================================
TEST #25: 15. Active adjustments
GET http://localhost:8007/v1/gps/active-adjustments
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "savingsAdjustment": null,
        "categoryFreezes": [],
        "timelineExtensions": [],
        "budgetRebalances": [
            {
                "id": "5d6f8fd2-8838-44ab-8c5c-1ffa30e08624",
                "fromCategoryId": "utilities",
                "fromCategoryName": "Utilities",
                "toCategoryId": "entertainment",
                "toCategoryName": "Entertainment",
                "amount": {
                    "amount": 81.46,
                    "formatted": "$81",
                    "currency": "USD"
                },
                "createdAt": "2026-02-06T17:03:10.383Z"
            }
        ],
        "summary": {
            "totalActiveFreezes": 0,
            "totalActiveBoosts": 0,
            "totalTimelineExtensions": 0,
            "estimatedMonthlySavings": {
                "amount": 0,
                "formatted": "$0",
                "currency": "USD"
            },
            "estimatedRecoveryDate": null
        },
        "hasActiveAdjustments": true
    },
    "timestamp": "2026-02-07T01:10:47.286Z"
}
RESULT: PASS

=============================================
TEST #26: 16a. Frozen check (Food & Dining)
GET http://localhost:8007/v1/gps/active-adjustments/frozen/Food%20%26%20Dining
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "categoryId": "food-dining",
        "categoryName": "Food & Dining",
        "isFrozen": false
    },
    "timestamp": "2026-02-07T01:10:47.328Z"
}
RESULT: PASS

=============================================
TEST #27: 16c. Frozen check (typo - fuzzy match)
GET http://localhost:8007/v1/gps/active-adjustments/frozen/Foood
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "categoryId": "Foood",
        "categoryName": "Foood",
        "isFrozen": false,
        "suggestions": [
            {
                "id": "food-dining",
                "name": "Food & Dining"
            }
        ],
        "didYouMean": "Category 'Foood' not found. Did you mean \"Food & Dining\"?"
    },
    "timestamp": "2026-02-07T01:10:47.367Z"
}
RESULT: PASS

=============================================
TEST #28: 16d. Frozen check (Transport)
GET http://localhost:8007/v1/gps/active-adjustments/frozen/Transport
---------------------------------------------
HTTP Status: 200
Response:
{
    "success": true,
    "data": {
        "categoryId": "Transport",
        "categoryName": "Transport",
        "isFrozen": false,
        "suggestions": [
            {
                "id": "transportation",
                "name": "Transportation"
            },
            {
                "id": "family-support",
                "name": "Family Support"
            },
            {
                "id": "cat-streaming",
                "name": "Entertainment"
            }
        ],
        "didYouMean": "Category 'Transport' not found. Did you mean \"Transportation\"? Other options: \"Family Support\", \"Entertainment\""
    },
    "timestamp": "2026-02-07T01:10:47.406Z"
}
RESULT: PASS

=============================================
TEST #29: Auth guard: GET /gps/streaks
GET http://localhost:8007/v1/gps/streaks (NO AUTH)
EXPECTED: HTTP 401
---------------------------------------------
HTTP Status: 401
Response:
{
    "success": false,
    "error": {
        "code": "AUTH_1005",
        "message": "Authentication required"
    },
    "timestamp": "2026-02-07T01:10:47.443Z"
}
RESULT: PASS (401 Unauthorized)

=============================================
TEST #30: Auth guard: GET /gps/achievements
GET http://localhost:8007/v1/gps/achievements (NO AUTH)
EXPECTED: HTTP 401
---------------------------------------------
HTTP Status: 401
Response:
{
    "success": false,
    "error": {
        "code": "AUTH_1005",
        "message": "Authentication required"
    },
    "timestamp": "2026-02-07T01:10:47.477Z"
}
RESULT: PASS (401 Unauthorized)

=============================================
TEST #31: Auth guard: GET /gps/notifications
GET http://localhost:8007/v1/gps/notifications (NO AUTH)
EXPECTED: HTTP 401
---------------------------------------------
HTTP Status: 401
Response:
{
    "success": false,
    "error": {
        "code": "AUTH_1005",
        "message": "Authentication required"
    },
    "timestamp": "2026-02-07T01:10:47.512Z"
}
RESULT: PASS (401 Unauthorized)


################################################
# TEST SUMMARY
################################################

Total Tests:  31
Passed:       29
Issues:       2

--- ISSUES ---

  #6: 3b. Select path: rate_adjustment (may 409) => HTTP 409
  #7: 3c. Select path: freeze_protocol (may 409) => HTTP 409

=============================================
END OF TEST RESULTS
=============================================
